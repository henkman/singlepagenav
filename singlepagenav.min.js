function newSinglePageNavigation(d,k){function m(b,e,d){var a=b;do{a=a.parentNode;if(!a)return;a.scrollTop+=1}while(0==a.scrollTop);var c=0;do{if(b==a)break;c+=b.offsetTop}while(b=b.offsetParent);scroll=function(a,l,b,f){f++;f>e||(a.scrollTop=l+(b-l)/e*f,k.setTimeout(function(){scroll(a,l,b,f)},d))};scroll(a,a.scrollTop,c,0)}return{init:function(){var b=d.querySelector("[data-pagenav]");if(b){var e=d.querySelectorAll("[data-pagenav-id]");if(0!=e.length){for(var h=0;h<e.length;h++){var a=e[h].getAttribute("data-pagenav-id"),
c=e[h].getAttribute("data-pagenav-name");c||(c=a);var g=d.createElement("a");g.setAttribute("data-pagenav-to",a);g.href="#"+a;g.innerHTML=c;g.onclick=function(a){a=a.target.getAttribute("data-pagenav-to");(a=d.querySelector("[data-pagenav-id='"+a+"']"))&&m(a,20,20);return!1};b.appendChild(g)}d.onscroll=function(){for(var a=0;a<e.length;a++)if(0<e[a].getBoundingClientRect().bottom){var a=e[a].getAttribute("data-pagenav-id"),b=d.querySelector("[data-pagenav-to='"+a+"']");if(b.classList.contains("pagenav-active"))break;
for(var f=d.querySelectorAll("[data-pagenav-to]"),c=0;c<f.length;c++)f[c].className=b==f[c]?"pagenav-active":"";k.location.hash="#"+a;break}};if(b=k.location.hash)a=b.substr(1),(g=d.querySelector("[data-pagenav-to='"+a+"']"))&&g.click()}}}}}var singlePageNavigation=newSinglePageNavigation(document,window);
